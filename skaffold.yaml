apiVersion: skaffold/v2beta5
kind: Config
build:
  artifacts:
  - image: localhost:5000/apps/demo
    buildpacks:
      builder: dsyer/java-builder
      dependencies:
        paths:
          - pom.xml
          - src/main/resources
          - target/classes
    sync:
      manual:
      # Need to copy source files as well, just to get classes synced
      - src: "target/classes/**/*"
        dest: /workspace/BOOT-INF/classes
        strip: target/classes/
deploy:
  kustomize:
    paths:
    - k8s/simple

profiles:
  - name: dev
    deploy:
      kustomize:
       paths:
       - k8s/dev
  - name: prod
    deploy:
      kustomize:
       paths:
       - k8s/prod
