apiVersion: skaffold/v2beta5
kind: Config
build:
  local:
    useBuildkit: true
  artifacts:
  - image: localhost:5000/apps/demo
    sync:
      manual:
      # Need to copy source files as well, just to get classes synced
      - src: "src/main/java/**/*"
        dest: /workspace
      - src: "src/main/resources/**/*"
        dest: /workspace/BOOT-INF/classes
        strip: src/main/resources/
      - src: "target/classes/**/*"
        dest: /workspace/BOOT-INF/classes
        strip: target/classes/
deploy:
  kustomize:
    paths:
    - k8s/simple

profiles:
  - name: dev
    deploy:
      kustomize:
       paths:
       - k8s/dev
